(function(){const v=document.createElement("link").relList;if(v&&v.supports&&v.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))L(e);new MutationObserver(e=>{for(const l of e)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&L(f)}).observe(document,{childList:!0,subtree:!0});function S(e){const l={};return e.integrity&&(l.integrity=e.integrity),e.referrerPolicy&&(l.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?l.credentials="include":e.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function L(e){if(e.ep)return;e.ep=!0;const l=S(e);fetch(e.href,l)}})();document.addEventListener("DOMContentLoaded",function(){const b=[{src:"/gallery/1.png",caption:"1 / 10"},{src:"/gallery/2.png",caption:"2 / 10"},{src:"/gallery/3.png",caption:"3 / 10"},{src:"/gallery/4.png",caption:"4 / 10"},{src:"/gallery/5.png",caption:"5 / 10"},{src:"/gallery/6.png",caption:"6 / 10"},{src:"/gallery/7.png",caption:"7 / 10"},{src:"/gallery/8.png",caption:"8 / 10"}],v=["/music/SpotiDownloader.com - Soft Notes, Strong Feelings - Lloyd Frontiny.mp3","/music/SpotiDownloader.com - African Queen - 2Baba.mp3"],S="coucou",L=document.getElementById("passwordGate"),e=document.getElementById("passwordInput"),l=document.getElementById("passwordSubmit"),f=document.getElementById("passwordError");function B(t){var n;document.body.classList.toggle("locked",!t),document.body.classList.toggle("unlocked",t),t?(f&&(f.textContent=""),e&&(e.value=""),D()):e&&((n=e.focus)==null||n.call(e))}function C(){var n,o;((e==null?void 0:e.value)||"").trim().toLowerCase()===S?B(!0):f&&e&&(f.textContent="Mot de passe incorrect.",(n=e.focus)==null||n.call(e),(o=e.select)==null||o.call(e))}L&&e&&l&&f&&(B(!1),l.addEventListener("click",C),e.addEventListener("keydown",t=>{t.key==="Enter"&&C()}));const p=document.getElementById("bgMusic");let h=0;function x(){p&&(p.src=v[h],p.volume=.55,p.load(),p.play().catch(t=>{console.log("Autoplay blocked:",t)}))}function M(){h=(h+1)%v.length,x()}p&&p.addEventListener("ended",M);function A(){h=0,M()}function D(){k(),N(),O(),P(),T(),A()}function k(){const t=Array.from(document.querySelectorAll(".nav-btn[data-view]")),n=Array.from(document.querySelectorAll(".view"));if(t.length===0||n.length===0)return;function o(i){for(const a of t){const d=a.dataset.view===i;a.classList.toggle("is-active",d),a.setAttribute("aria-selected",d?"true":"false")}for(const a of n)a.classList.toggle("is-active",a.id===`view-${i}`)}t.forEach(i=>{i.addEventListener("click",()=>o(i.dataset.view))}),o("gallery")}function N(){const t=document.getElementById("galleryImage"),n=document.getElementById("galleryCaption"),o=document.getElementById("galleryPrev"),i=document.getElementById("galleryNext");if(!t||!n||!o||!i)return;let a=0;function d(){const u=b[a];t.classList.add("is-fading"),window.setTimeout(()=>{t.src=u.src,n.textContent=u.caption,t.classList.remove("is-fading")},160)}function r(u){a=(a+u+b.length)%b.length,d()}o.addEventListener("click",()=>r(-1)),i.addEventListener("click",()=>r(1)),document.addEventListener("keydown",u=>{const m=document.getElementById("view-gallery");m!=null&&m.classList.contains("is-active")&&(u.key==="ArrowLeft"&&r(-1),u.key==="ArrowRight"&&r(1))}),d()}function O(){const t=document.getElementById("notesHistory"),n=document.getElementById("notesForm"),o=document.getElementById("notesInput"),i=document.getElementById("notesSender"),a=document.getElementById("notesClear");if(!t||!n||!o||!i||!a)return;const d="psg-notes-v1";let r=[];function u(){try{const s=window.localStorage.getItem(d);if(!s)return[];const c=JSON.parse(s);return Array.isArray(c)?c:[]}catch(s){return console.error("Error loading messages from localStorage:",s),[]}}function m(s){try{window.localStorage.setItem(d,JSON.stringify(s))}catch(c){console.error("Error saving messages to localStorage:",c)}}function I(s){return new Date(s).toLocaleString(void 0,{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function E(s){t.innerHTML="";for(const c of s){const g=document.createElement("div");g.className=`msg ${c.sender==="coumba"?"her":"me"}`;const y=document.createElement("p");y.className="msg-text",y.textContent=c.text;const w=document.createElement("div");w.className="msg-meta",w.textContent=`${c.sender==="coumba"?"Coumba":"Le C"} · ${I(c.created_at)}`,g.appendChild(y),g.appendChild(w),t.appendChild(g)}t.scrollTop=t.scrollHeight}r=u(),E(r),n.addEventListener("submit",s=>{s.preventDefault();const c=(o.value||"").trim();if(!c)return;o.disabled=!0;const g={id:crypto.randomUUID?crypto.randomUUID():String(Date.now()),sender:i.value==="coumba"?"coumba":"Le C",text:c,created_at:new Date().toISOString()};r.push(g),m(r),E(r),o.value="",o.focus(),o.disabled=!1}),a.addEventListener("click",()=>{confirm("Êtes-vous sûr de vouloir effacer tout l'historique?")&&(r=[],m(r),E(r))})}function T(){const t=document.getElementById("surpriseButton"),n=document.getElementById("surpriseOverlay"),o=document.getElementById("surpriseImage");if(!t||!n||!o)return;let i=!1;function a(){if(i)return;i=!0;const d=["/gallery/but1.jpg","/gallery/but2.webp","/gallery/but3.jpeg"];let r=0;function u(){const m=d[r];m&&(o.src=m,r+=1,r<d.length?window.setTimeout(u,2e3):window.setTimeout(()=>{i=!1,n.classList.remove("is-visible"),n.setAttribute("aria-hidden","true")},2e3))}n.classList.add("is-visible"),n.setAttribute("aria-hidden","false"),u()}t.addEventListener("click",a),n.addEventListener("click",()=>{i||(n.classList.remove("is-visible"),n.setAttribute("aria-hidden","true"))})}function P(){const t=document.getElementById("cdDays"),n=document.getElementById("cdHours"),o=document.getElementById("cdMinutes"),i=document.getElementById("cdSeconds"),a=document.getElementById("cdMeta");if(!t||!n||!o||!i||!a)return;const d=8,r=19,u=2005;function m(s){return String(s).padStart(2,"0")}function I(s){const c=s.getFullYear(),g=new Date(c,d,r,0,0,0,0);return s<=g?g:new Date(c+1,d,r,0,0,0,0)}function E(){const s=new Date,c=I(s),g=Math.max(0,c.getTime()-s.getTime()),y=Math.floor(g/1e3),w=Math.floor(y/(3600*24)),F=Math.floor(y%(3600*24)/3600),q=Math.floor(y%3600/60),R=y%60;t.textContent=String(w),n.textContent=m(F),o.textContent=m(q),i.textContent=m(R);const $=c.getFullYear()-u;a.textContent=`Coumba aura ${$} ans le ${c.toLocaleDateString("fr-FR",{day:"2-digit",month:"long",year:"numeric"})}.`}E(),window.setInterval(E,1e3)}window.addEventListener("load",function(){document.body.style.opacity="0",document.body.style.transition="opacity 0.5s ease",setTimeout(()=>{document.body.style.opacity="1"},100)})});
