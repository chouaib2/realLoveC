(function(){const E=document.createElement("link").relList;if(E&&E.supports&&E.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))S(e);new MutationObserver(e=>{for(const d of e)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&S(f)}).observe(document,{childList:!0,subtree:!0});function I(e){const d={};return e.integrity&&(d.integrity=e.integrity),e.referrerPolicy&&(d.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?d.credentials="include":e.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function S(e){if(e.ep)return;e.ep=!0;const d=I(e);fetch(e.href,d)}})();document.addEventListener("DOMContentLoaded",function(){const L=[{src:"/gallery/1.png",caption:"1 / 10"},{src:"/gallery/2.png",caption:"2 / 10"},{src:"/gallery/3.png",caption:"3 / 10"},{src:"/gallery/4.png",caption:"4 / 10"},{src:"/gallery/5.png",caption:"5 / 10"},{src:"/gallery/6.png",caption:"6 / 10"},{src:"/gallery/7.png",caption:"7 / 10"},{src:"/gallery/8.png",caption:"8 / 10"}],E=["/music/SpotiDownloader.com - Soft Notes, Strong Feelings - Lloyd Frontiny.mp3","/music/SpotiDownloader.com - African Queen - 2Baba.mp3"],I="coucou",S=document.getElementById("passwordGate"),e=document.getElementById("passwordInput"),d=document.getElementById("passwordSubmit"),f=document.getElementById("passwordError");function B(t){var o;document.body.classList.toggle("locked",!t),document.body.classList.toggle("unlocked",t),t?(f&&(f.textContent=""),e&&(e.value=""),A()):e&&((o=e.focus)==null||o.call(e))}function C(){var o,n;((e==null?void 0:e.value)||"").trim().toLowerCase()===I?B(!0):f&&e&&(f.textContent="Mot de passe incorrect.",(o=e.focus)==null||o.call(e),(n=e.select)==null||n.call(e))}S&&e&&d&&f&&(B(!1),d.addEventListener("click",C),e.addEventListener("keydown",t=>{t.key==="Enter"&&C()}));const p=document.getElementById("bgMusic");let w=0;function x(){p&&(p.src=E[w],p.volume=.55,p.load(),p.play().catch(t=>{console.log("Autoplay blocked:",t)}))}function M(){w=(w+1)%E.length,x()}p&&p.addEventListener("ended",M);function D(){w=0,M()}function A(){k(),N(),T(),P(),O(),D()}function k(){const t=Array.from(document.querySelectorAll(".nav-btn[data-view]")),o=Array.from(document.querySelectorAll(".view"));if(t.length===0||o.length===0)return;function n(i){for(const a of t){const u=a.dataset.view===i;a.classList.toggle("is-active",u),a.setAttribute("aria-selected",u?"true":"false")}for(const a of o)a.classList.toggle("is-active",a.id===`view-${i}`)}t.forEach(i=>{i.addEventListener("click",()=>n(i.dataset.view))}),n("gallery")}function N(){const t=document.getElementById("galleryImage"),o=document.getElementById("galleryCaption"),n=document.getElementById("galleryPrev"),i=document.getElementById("galleryNext");if(!t||!o||!n||!i)return;let a=0;function u(){const l=L[a];t.classList.add("is-fading"),window.setTimeout(()=>{t.src=l.src,o.textContent=l.caption,t.classList.remove("is-fading")},160)}function s(l){a=(a+l+L.length)%L.length,u()}n.addEventListener("click",()=>s(-1)),i.addEventListener("click",()=>s(1)),document.addEventListener("keydown",l=>{const m=document.getElementById("view-gallery");m!=null&&m.classList.contains("is-active")&&(l.key==="ArrowLeft"&&s(-1),l.key==="ArrowRight"&&s(1))}),u()}function T(){const t=document.getElementById("notesHistory"),o=document.getElementById("notesForm"),n=document.getElementById("notesInput"),i=document.getElementById("notesSender"),a=document.getElementById("notesClear");if(!t||!o||!n||!i||!a)return;const u="psg-notes-v1";let s=[];function l(){try{const r=window.localStorage.getItem(u);if(!r)return[];const c=JSON.parse(r);return Array.isArray(c)?c:[]}catch(r){return console.error("Error loading messages from localStorage:",r),[]}}function m(r){try{window.localStorage.setItem(u,JSON.stringify(r))}catch(c){console.error("Error saving messages to localStorage:",c)}}function v(r){return new Date(r).toLocaleString(void 0,{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function h(r){t.innerHTML="";for(const c of r){const g=document.createElement("div");g.className=`msg ${c.sender==="coumba"?"her":"me"}`;const y=document.createElement("p");y.className="msg-text",y.textContent=c.text;const b=document.createElement("div");b.className="msg-meta",b.textContent=`${c.sender==="coumba"?"Coumba":"Le C"} · ${v(c.created_at)}`,g.appendChild(y),g.appendChild(b),t.appendChild(g)}t.scrollTop=t.scrollHeight}s=l(),h(s),o.addEventListener("submit",r=>{r.preventDefault();const c=(n.value||"").trim();if(!c)return;n.disabled=!0;const g={id:crypto.randomUUID?crypto.randomUUID():String(Date.now()),sender:i.value==="coumba"?"coumba":"Le C",text:c,created_at:new Date().toISOString()};s.push(g),m(s),h(s),n.value="",n.focus(),n.disabled=!1}),a.addEventListener("click",()=>{confirm("Êtes-vous sûr de vouloir effacer tout l'historique?")&&(s=[],m(s),h(s))})}function O(){const t=document.getElementById("surpriseButton"),o=document.getElementById("galleryImage"),n=document.getElementById("galleryCaption");if(!t||!o||!n)return;let i=!1;function a(){if(i)return;i=!0;const u=[{src:"/gallery/but1.jpg",caption:"but 1"},{src:"/gallery/but2.webp",caption:"but 2"},{src:"/gallery/but3.jpeg",caption:"but 3"}],s={src:o.src,caption:n.textContent||""};let l=0;function m(){const v=u[l];v&&(o.src=v.src,n.textContent=v.caption,l+=1,l<u.length?window.setTimeout(m,2e3):window.setTimeout(()=>{o.src=s.src,n.textContent=s.caption,i=!1},2e3))}m()}t.addEventListener("click",a)}function P(){const t=document.getElementById("cdDays"),o=document.getElementById("cdHours"),n=document.getElementById("cdMinutes"),i=document.getElementById("cdSeconds"),a=document.getElementById("cdMeta");if(!t||!o||!n||!i||!a)return;const u=8,s=19,l=2005;function m(r){return String(r).padStart(2,"0")}function v(r){const c=r.getFullYear(),g=new Date(c,u,s,0,0,0,0);return r<=g?g:new Date(c+1,u,s,0,0,0,0)}function h(){const r=new Date,c=v(r),g=Math.max(0,c.getTime()-r.getTime()),y=Math.floor(g/1e3),b=Math.floor(y/(3600*24)),F=Math.floor(y%(3600*24)/3600),q=Math.floor(y%3600/60),R=y%60;t.textContent=String(b),o.textContent=m(F),n.textContent=m(q),i.textContent=m(R);const $=c.getFullYear()-l;a.textContent=`Coumba aura ${$} ans le ${c.toLocaleDateString("fr-FR",{day:"2-digit",month:"long",year:"numeric"})}.`}h(),window.setInterval(h,1e3)}window.addEventListener("load",function(){document.body.style.opacity="0",document.body.style.transition="opacity 0.5s ease",setTimeout(()=>{document.body.style.opacity="1"},100)})});
