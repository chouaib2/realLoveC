(function(){const v=document.createElement("link").relList;if(v&&v.supports&&v.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))b(e);new MutationObserver(e=>{for(const l of e)if(l.type==="childList")for(const g of l.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&b(g)}).observe(document,{childList:!0,subtree:!0});function S(e){const l={};return e.integrity&&(l.integrity=e.integrity),e.referrerPolicy&&(l.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?l.credentials="include":e.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function b(e){if(e.ep)return;e.ep=!0;const l=S(e);fetch(e.href,l)}})();document.addEventListener("DOMContentLoaded",function(){const L=[{src:"/gallery/1.png",caption:"1 / 10"},{src:"/gallery/2.png",caption:"2 / 10"},{src:"/gallery/3.png",caption:"3 / 10"},{src:"/gallery/4.png",caption:"4 / 10"},{src:"/gallery/5.png",caption:"5 / 10"},{src:"/gallery/6.png",caption:"6 / 10"},{src:"/gallery/7.png",caption:"7 / 10"},{src:"/gallery/8.png",caption:"8 / 10"}],v=["/music/SpotiDownloader.com - Soft Notes, Strong Feelings - Lloyd Frontiny.mp3","/music/SpotiDownloader.com - African Queen - 2Baba.mp3"],S="coucou",b=document.getElementById("passwordGate"),e=document.getElementById("passwordInput"),l=document.getElementById("passwordSubmit"),g=document.getElementById("passwordError");function B(t){var n;document.body.classList.toggle("locked",!t),document.body.classList.toggle("unlocked",t),t?(g&&(g.textContent=""),e&&(e.value=""),D()):e&&((n=e.focus)==null||n.call(e))}function C(){var n,o;((e==null?void 0:e.value)||"").trim().toLowerCase()===S?B(!0):g&&e&&(g.textContent="Mot de passe incorrect.",(n=e.focus)==null||n.call(e),(o=e.select)==null||o.call(e))}b&&e&&l&&g&&(B(!1),l.addEventListener("click",C),e.addEventListener("keydown",t=>{t.key==="Enter"&&C()}));const p=document.getElementById("bgMusic");let h=0;function x(){p&&(p.src=v[h],p.volume=.55,p.load(),p.play().catch(t=>{console.log("Autoplay blocked:",t)}))}function M(){h=(h+1)%v.length,x()}p&&p.addEventListener("ended",M);function A(){h=0,M()}function D(){k(),T(),N(),F(),O(),A()}function k(){const t=Array.from(document.querySelectorAll(".nav-btn[data-view]")),n=Array.from(document.querySelectorAll(".view"));if(t.length===0||n.length===0)return;function o(i){for(const c of t){const d=c.dataset.view===i;c.classList.toggle("is-active",d),c.setAttribute("aria-selected",d?"true":"false")}for(const c of n)c.classList.toggle("is-active",c.id===`view-${i}`)}t.forEach(i=>{i.addEventListener("click",()=>o(i.dataset.view))}),o("gallery")}function T(){const t=document.getElementById("galleryImage"),n=document.getElementById("galleryCaption"),o=document.getElementById("galleryPrev"),i=document.getElementById("galleryNext");if(!t||!n||!o||!i)return;let c=0;function d(){const u=L[c];t.classList.add("is-fading"),window.setTimeout(()=>{t.src=u.src,n.textContent=u.caption,t.classList.remove("is-fading")},160)}function a(u){c=(c+u+L.length)%L.length,d()}o.addEventListener("click",()=>a(-1)),i.addEventListener("click",()=>a(1)),document.addEventListener("keydown",u=>{const f=document.getElementById("view-gallery");f!=null&&f.classList.contains("is-active")&&(u.key==="ArrowLeft"&&a(-1),u.key==="ArrowRight"&&a(1))}),d()}function N(){const t=document.getElementById("notesHistory"),n=document.getElementById("notesForm"),o=document.getElementById("notesInput"),i=document.getElementById("notesSender"),c=document.getElementById("notesClear");if(!t||!n||!o||!i||!c)return;const d="psg-notes-v1";let a=[];function u(){try{const r=window.localStorage.getItem(d);if(!r)return[];const s=JSON.parse(r);return Array.isArray(s)?s:[]}catch(r){return console.error("Error loading messages from localStorage:",r),[]}}function f(r){try{window.localStorage.setItem(d,JSON.stringify(r))}catch(s){console.error("Error saving messages to localStorage:",s)}}function I(r){return new Date(r).toLocaleString(void 0,{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function E(r){t.innerHTML="";for(const s of r){const m=document.createElement("div");m.className=`msg ${s.sender==="coumba"?"her":"me"}`;const y=document.createElement("p");y.className="msg-text",y.textContent=s.text;const w=document.createElement("div");w.className="msg-meta",w.textContent=`${s.sender==="coumba"?"Coumba":"Le C"} · ${I(s.created_at)}`,m.appendChild(y),m.appendChild(w),t.appendChild(m)}t.scrollTop=t.scrollHeight}a=u(),E(a),n.addEventListener("submit",r=>{r.preventDefault();const s=(o.value||"").trim();if(!s)return;o.disabled=!0;const m={id:crypto.randomUUID?crypto.randomUUID():String(Date.now()),sender:i.value==="coumba"?"coumba":"Le C",text:s,created_at:new Date().toISOString()};a.push(m),f(a),E(a),o.value="",o.focus(),o.disabled=!1}),c.addEventListener("click",()=>{confirm("Êtes-vous sûr de vouloir effacer tout l'historique?")&&(a=[],f(a),E(a))})}function O(){const t=document.getElementById("surpriseButton"),n=document.getElementById("surpriseOverlay");if(!t||!n)return;let o=null;function i(){n.classList.remove("is-visible"),n.setAttribute("aria-hidden","true")}function c(){n.classList.add("is-visible"),n.setAttribute("aria-hidden","false"),o&&window.clearTimeout(o),o=window.setTimeout(i,3e3)}t.addEventListener("click",c),n.addEventListener("click",i)}function F(){const t=document.getElementById("cdDays"),n=document.getElementById("cdHours"),o=document.getElementById("cdMinutes"),i=document.getElementById("cdSeconds"),c=document.getElementById("cdMeta");if(!t||!n||!o||!i||!c)return;const d=8,a=19,u=2005;function f(r){return String(r).padStart(2,"0")}function I(r){const s=r.getFullYear(),m=new Date(s,d,a,0,0,0,0);return r<=m?m:new Date(s+1,d,a,0,0,0,0)}function E(){const r=new Date,s=I(r),m=Math.max(0,s.getTime()-r.getTime()),y=Math.floor(m/1e3),w=Math.floor(y/(3600*24)),P=Math.floor(y%(3600*24)/3600),R=Math.floor(y%3600/60),$=y%60;t.textContent=String(w),n.textContent=f(P),o.textContent=f(R),i.textContent=f($);const H=s.getFullYear()-u;c.textContent=`Coumba aura ${H} ans le ${s.toLocaleDateString("fr-FR",{day:"2-digit",month:"long",year:"numeric"})}.`}E(),window.setInterval(E,1e3)}window.addEventListener("load",function(){document.body.style.opacity="0",document.body.style.transition="opacity 0.5s ease",setTimeout(()=>{document.body.style.opacity="1"},100)})});
