(function(){const v=document.createElement("link").relList;if(v&&v.supports&&v.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))S(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const f of a.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&S(f)}).observe(document,{childList:!0,subtree:!0});function b(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?a.credentials="include":e.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function S(e){if(e.ep)return;e.ep=!0;const a=b(e);fetch(e.href,a)}})();document.addEventListener("DOMContentLoaded",function(){const L=[{src:"/gallery/1.png",caption:"1 / 10"},{src:"/gallery/2.png",caption:"2 / 10"},{src:"/gallery/3.png",caption:"3 / 10"},{src:"/gallery/4.png",caption:"4 / 10"},{src:"/gallery/5.png",caption:"5 / 10"},{src:"/gallery/6.png",caption:"6 / 10"},{src:"/gallery/7.png",caption:"7 / 10"},{src:"/gallery/8.png",caption:"8 / 10"}],v=["/music/SpotiDownloader.com - Soft Notes, Strong Feelings - Lloyd Frontiny.mp3","/music/SpotiDownloader.com - African Queen - 2Baba.mp3"],b="coucou",S=document.getElementById("passwordGate"),e=document.getElementById("passwordInput"),a=document.getElementById("passwordSubmit"),f=document.getElementById("passwordError");function B(t){var c;document.body.classList.toggle("locked",!t),document.body.classList.toggle("unlocked",t),t?(f&&(f.textContent=""),e&&(e.value=""),A()):e&&((c=e.focus)==null||c.call(e))}function C(){var c,r;((e==null?void 0:e.value)||"").trim().toLowerCase()===b?B(!0):f&&e&&(f.textContent="Mot de passe incorrect.",(c=e.focus)==null||c.call(e),(r=e.select)==null||r.call(e))}S&&e&&a&&f&&(B(!1),a.addEventListener("click",C),e.addEventListener("keydown",t=>{t.key==="Enter"&&C()}));const p=document.getElementById("bgMusic");let h=0;function x(){p&&(p.src=v[h],p.volume=.55,p.load(),p.play().catch(t=>{console.log("Autoplay blocked:",t)}))}function M(){h=(h+1)%v.length,x()}p&&p.addEventListener("ended",M);function D(){h=0,M()}function A(){k(),N(),O(),T(),D()}function k(){const t=Array.from(document.querySelectorAll(".nav-btn[data-view]")),c=Array.from(document.querySelectorAll(".view"));if(t.length===0||c.length===0)return;function r(l){for(const s of t){const d=s.dataset.view===l;s.classList.toggle("is-active",d),s.setAttribute("aria-selected",d?"true":"false")}for(const s of c)s.classList.toggle("is-active",s.id===`view-${l}`)}t.forEach(l=>{l.addEventListener("click",()=>r(l.dataset.view))}),r("gallery")}function N(){const t=document.getElementById("galleryImage"),c=document.getElementById("galleryCaption"),r=document.getElementById("galleryPrev"),l=document.getElementById("galleryNext");if(!t||!c||!r||!l)return;let s=0;function d(){const u=L[s];t.classList.add("is-fading"),window.setTimeout(()=>{t.src=u.src,c.textContent=u.caption,t.classList.remove("is-fading")},160)}function i(u){s=(s+u+L.length)%L.length,d()}r.addEventListener("click",()=>i(-1)),l.addEventListener("click",()=>i(1)),document.addEventListener("keydown",u=>{const g=document.getElementById("view-gallery");g!=null&&g.classList.contains("is-active")&&(u.key==="ArrowLeft"&&i(-1),u.key==="ArrowRight"&&i(1))}),d()}function O(){const t=document.getElementById("notesHistory"),c=document.getElementById("notesForm"),r=document.getElementById("notesInput"),l=document.getElementById("notesSender"),s=document.getElementById("notesClear");if(!t||!c||!r||!l||!s)return;const d="psg-notes-v1";let i=[];function u(){try{const n=window.localStorage.getItem(d);if(!n)return[];const o=JSON.parse(n);return Array.isArray(o)?o:[]}catch(n){return console.error("Error loading messages from localStorage:",n),[]}}function g(n){try{window.localStorage.setItem(d,JSON.stringify(n))}catch(o){console.error("Error saving messages to localStorage:",o)}}function I(n){return new Date(n).toLocaleString(void 0,{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function E(n){t.innerHTML="";for(const o of n){const m=document.createElement("div");m.className=`msg ${o.sender==="coumba"?"her":"me"}`;const y=document.createElement("p");y.className="msg-text",y.textContent=o.text;const w=document.createElement("div");w.className="msg-meta",w.textContent=`${o.sender==="coumba"?"Coumba":"Le C"} · ${I(o.created_at)}`,m.appendChild(y),m.appendChild(w),t.appendChild(m)}t.scrollTop=t.scrollHeight}i=u(),E(i),c.addEventListener("submit",n=>{n.preventDefault();const o=(r.value||"").trim();if(!o)return;r.disabled=!0;const m={id:crypto.randomUUID?crypto.randomUUID():String(Date.now()),sender:l.value==="coumba"?"coumba":"Le C",text:o,created_at:new Date().toISOString()};i.push(m),g(i),E(i),r.value="",r.focus(),r.disabled=!1}),s.addEventListener("click",()=>{confirm("Êtes-vous sûr de vouloir effacer tout l'historique?")&&(i=[],g(i),E(i))})}function T(){const t=document.getElementById("cdDays"),c=document.getElementById("cdHours"),r=document.getElementById("cdMinutes"),l=document.getElementById("cdSeconds"),s=document.getElementById("cdMeta");if(!t||!c||!r||!l||!s)return;const d=8,i=19,u=2005;function g(n){return String(n).padStart(2,"0")}function I(n){const o=n.getFullYear(),m=new Date(o,d,i,0,0,0,0);return n<=m?m:new Date(o+1,d,i,0,0,0,0)}function E(){const n=new Date,o=I(n),m=Math.max(0,o.getTime()-n.getTime()),y=Math.floor(m/1e3),w=Math.floor(y/(3600*24)),F=Math.floor(y%(3600*24)/3600),P=Math.floor(y%3600/60),R=y%60;t.textContent=String(w),c.textContent=g(F),r.textContent=g(P),l.textContent=g(R);const $=o.getFullYear()-u;s.textContent=`Coumba aura ${$} ans le ${o.toLocaleDateString("fr-FR",{day:"2-digit",month:"long",year:"numeric"})}.`}E(),window.setInterval(E,1e3)}window.addEventListener("load",function(){document.body.style.opacity="0",document.body.style.transition="opacity 0.5s ease",setTimeout(()=>{document.body.style.opacity="1"},100)})});
